Options +Indexes
Options +FollowSymlinks

DirectoryIndex index.php

#Show error documents from the site root [ FAILSAFE ]

#Disable caching for testing [ TESTING ]
<ifModule mod_expires.c>
	ExpiresDefault A0
</ifModule>

#Disable caching for testing [ TESTING ]
<ifModule mod_headers.c>
    Header unset ETag
	Header set Cache-Control "no-store, no-cache, must-revalidate, max-age=0"
	Header set Pragma "no-cache"
    Header set Expires "Wed, 11 Jan 1984 05:00:00 GMT"
</ifModule>

<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/text text/html text/plain text/xml text/css text/javascript text/x-component application/x-javascript application/javascript application/json application/xml application/xhtml+xml application/rss+xml application/atom+xml image/svg+xml application/x-font-ttf font/opentype
</IfModule>

FileETag None

#Rewrite URLs
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteBase /

    <IfModule mod_env.c>
        RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
    </IfModule>

    #Remove trailing slashes on virtual directories
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond $1#%{REQUEST_URI} ([^#]*)#(.*)/\1$
    RewriteRule ^([^?]*)/$ %2 [NC,NE,QSA,L,R=302]

    #Force all traffic through the front controller
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-l
    RewriteCond %{REQUEST_URI}::$1 ^(.*?/)(.*)::\2$
    RewriteRule ^([^?]*)$ %1index.php?path=$1 [NC,NE,QSA,L]
</IfModule>
